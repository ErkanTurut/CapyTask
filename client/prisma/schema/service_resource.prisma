model service_resource {
    id         String   @id @default(dbgenerated("nanoid(10)"))
    user_id    String   @db.Uuid
    is_active  Boolean  @default(true)
    created_at DateTime @default(now()) @db.Timestamptz(6)
    updated_at DateTime @default(now()) @updatedAt @db.Timestamptz(6)
    team_id    String
    // Relations to other entities
    user       user     @relation(fields: [user_id], references: [id])
    team       team     @relation(fields: [team_id], references: [id])

    // Relation from other entities
    service_resource_absence service_resource_absence[]
    assigned_resource        assigned_resource[]

    @@index([user_id])
    @@index([team_id])
}

model service_resource_absence {
    id                  String   @id @default(dbgenerated("nanoid(10)"))
    service_resource_id String
    start_date          DateTime
    end_date            DateTime
    created_at          DateTime @default(now()) @db.Timestamptz(6)
    updated_at          DateTime @default(now()) @updatedAt @db.Timestamptz(6)

    // Relations to other entities
    service_resource service_resource @relation(fields: [service_resource_id], references: [id])

    @@index([service_resource_id])
    @@index([start_date])
    @@index([end_date])
}

model assigned_resource {
    id                     String   @id @default(dbgenerated("nanoid(10)"))
    service_appointment_id String
    service_resource_id    String
    created_at             DateTime @default(now()) @db.Timestamptz(6)
    updated_at             DateTime @default(now()) @updatedAt @db.Timestamptz(6)

    // Relations to other entities
    service_appointment service_appointment @relation(fields: [service_appointment_id], references: [id], onDelete: Cascade)
    service_resource    service_resource    @relation(fields: [service_resource_id], references: [id])

    @@index([service_appointment_id])
    @@index([service_resource_id])
}
